(()=>{"use strict";var e={306:(e,t)=>{function n(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}function o(){return p("extensions.getStats")}"function"==typeof SuppressedError&&SuppressedError;Object.freeze({__proto__:null,broadcast:function(e,t){return p("extensions.broadcast",{event:e,data:t})},dispatch:function(e,t,r){return new Promise(((i,s)=>n(this,void 0,void 0,(function*(){const n=yield o();if(n.loaded.includes(e))if(n.connected.includes(e))try{const n=yield p("extensions.dispatch",{extensionId:e,event:t,data:r});i(n)}catch(n){s(n)}else!function(e,t){e in l?l[e].push(t):l[e]=[t]}(e,{method:"extensions.dispatch",data:{extensionId:e,event:t,data:r},resolve:i,reject:s});else s({code:"NE_EX_EXTNOTL",message:`${e} is not loaded`})}))))},getStats:o});function r(e,t){return window.addEventListener(e,t),Promise.resolve({success:!0,message:"Event listener added"})}function i(e,t){const n=new CustomEvent(e,{detail:t});return window.dispatchEvent(n),Promise.resolve({success:!0,message:"Message dispatched"})}function s(e){const t=window.atob(e),n=t.length,o=new Uint8Array(n);for(let e=0;e<n;e++)o[e]=t.charCodeAt(e);return o.buffer}function a(e){let t=new Uint8Array(e),n="";for(let e of t)n+=String.fromCharCode(e);return window.btoa(n)}let c;const u={},d=[],l={};function f(){window.NL_TOKEN&&sessionStorage.setItem("NL_TOKEN",window.NL_TOKEN);const e=g().split(".")[1];c=new WebSocket(`ws://${window.location.hostname}:${window.NL_PORT}?connectToken=${e}`),function(){r("ready",(()=>n(this,void 0,void 0,(function*(){if(yield w(d),!window.NL_EXTENABLED)return;const e=yield o();for(const t of e.connected)i("extensionReady",t)})))),r("extClientConnect",(e=>{i("extensionReady",e.detail)})),window.NL_EXTENABLED&&r("extensionReady",(e=>n(this,void 0,void 0,(function*(){e.detail in l&&(yield w(l[e.detail]),delete l[e.detail])}))))}(),function(){c.addEventListener("message",(e=>{var t,n,o;const r=JSON.parse(e.data);r.id&&r.id in u?((null===(t=r.data)||void 0===t?void 0:t.error)?(u[r.id].reject(r.data.error),"NE_RT_INVTOKN"==r.data.error.code&&(c.close(),document.body.innerText="",document.write("<code>NE_RT_INVTOKN</code>: Neutralinojs application cannot execute native methods since <code>NL_TOKEN</code> is invalid."))):(null===(n=r.data)||void 0===n?void 0:n.success)&&u[r.id].resolve(r.data.hasOwnProperty("returnValue")?r.data.returnValue:r.data),delete u[r.id]):r.event&&("openedFile"==r.event&&"dataBinary"==(null===(o=null==r?void 0:r.data)||void 0===o?void 0:o.action)&&(r.data.data=s(r.data.data)),i(r.event,r.data))})),c.addEventListener("open",(e=>n(this,void 0,void 0,(function*(){i("ready")})))),c.addEventListener("close",(e=>n(this,void 0,void 0,(function*(){i("serverOffline",{code:"NE_CL_NSEROFF",message:"Neutralino server is offline. Try restarting the application"})})))),c.addEventListener("error",(e=>n(this,void 0,void 0,(function*(){document.body.innerText="",document.write("<code>NE_CL_IVCTOKN</code>: Neutralinojs application cannot connect with the framework core using <code>NL_TOKEN</code>.")}))))}()}function p(e,t){return new Promise(((n,o)=>{if((null==c?void 0:c.readyState)!=WebSocket.OPEN)return r={method:e,data:t,resolve:n,reject:o},void d.push(r);var r;const i="10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))),s=g();u[i]={resolve:n,reject:o},c.send(JSON.stringify({id:i,method:e,data:t,accessToken:s}))}))}function w(e){return n(this,void 0,void 0,(function*(){for(;e.length>0;){const t=e.shift();try{const e=yield p(t.method,t.data);t.resolve(e)}catch(e){t.reject(e)}}}))}function g(){return window.NL_TOKEN||sessionStorage.getItem("NL_TOKEN")||""}function m(e,t){return p("filesystem.writeBinaryFile",{path:e,data:a(t)})}Object.freeze({__proto__:null,appendBinaryFile:function(e,t){return p("filesystem.appendBinaryFile",{path:e,data:a(t)})},appendFile:function(e,t){return p("filesystem.appendFile",{path:e,data:t})},copy:function(e,t,n){return p("filesystem.copy",Object.assign({source:e,destination:t},n))},createDirectory:function(e){return p("filesystem.createDirectory",{path:e})},createWatcher:function(e){return p("filesystem.createWatcher",{path:e})},getOpenedFileInfo:function(e){return p("filesystem.getOpenedFileInfo",{id:e})},getStats:function(e){return p("filesystem.getStats",{path:e})},getWatchers:function(){return p("filesystem.getWatchers")},move:function(e,t){return p("filesystem.move",{source:e,destination:t})},openFile:function(e){return p("filesystem.openFile",{path:e})},readBinaryFile:function(e,t){return new Promise(((n,o)=>{p("filesystem.readBinaryFile",Object.assign({path:e},t)).then((e=>{n(s(e))})).catch((e=>{o(e)}))}))},readDirectory:function(e,t){return p("filesystem.readDirectory",Object.assign({path:e},t))},readFile:function(e,t){return p("filesystem.readFile",Object.assign({path:e},t))},remove:function(e){return p("filesystem.remove",{path:e})},removeWatcher:function(e){return p("filesystem.removeWatcher",{id:e})},updateOpenedFile:function(e,t,n){return p("filesystem.updateOpenedFile",{id:e,event:t,data:n})},writeBinaryFile:m,writeFile:function(e,t){return p("filesystem.writeFile",{path:e,data:t})}});function v(e,t){return p("os.execCommand",Object.assign({command:e},t))}var h=Object.freeze({__proto__:null,execCommand:v,getEnv:function(e){return p("os.getEnv",{key:e})},getEnvs:function(){return p("os.getEnvs")},getPath:function(e){return p("os.getPath",{name:e})},getSpawnedProcesses:function(){return p("os.getSpawnedProcesses")},open:function(e){return p("os.open",{url:e})},setTray:function(e){return p("os.setTray",e)},showFolderDialog:function(e,t){return p("os.showFolderDialog",Object.assign({title:e},t))},showMessageBox:function(e,t,n,o){return p("os.showMessageBox",{title:e,content:t,choice:n,icon:o})},showNotification:function(e,t,n){return p("os.showNotification",{title:e,content:t,icon:n})},showOpenDialog:function(e,t){return p("os.showOpenDialog",Object.assign({title:e},t))},showSaveDialog:function(e,t){return p("os.showSaveDialog",Object.assign({title:e},t))},spawnProcess:function(e,t){return p("os.spawnProcess",{command:e,cwd:t})},updateSpawnedProcess:function(e,t,n){return p("os.updateSpawnedProcess",{id:e,event:t,data:n})}});Object.freeze({__proto__:null,getArch:function(){return p("computer.getArch")},getCPUInfo:function(){return p("computer.getCPUInfo")},getDisplays:function(){return p("computer.getDisplays")},getKernelInfo:function(){return p("computer.getKernelInfo")},getMemoryInfo:function(){return p("computer.getMemoryInfo")},getMousePosition:function(){return p("computer.getMousePosition")},getOSInfo:function(){return p("computer.getOSInfo")}}),Object.freeze({__proto__:null,getData:function(e){return p("storage.getData",{key:e})},getKeys:function(){return p("storage.getKeys")},setData:function(e,t){return p("storage.setData",{key:e,data:t})}});function y(e,t){return p("debug.log",{message:e,type:t})}Object.freeze({__proto__:null,log:y});function _(e){return p("app.exit",{code:e})}var O=Object.freeze({__proto__:null,broadcast:function(e,t){return p("app.broadcast",{event:e,data:t})},exit:_,getConfig:function(){return p("app.getConfig")},killProcess:function(){return p("app.killProcess")},readProcessInput:function(e){return p("app.readProcessInput",{readAll:e})},restartProcess:function(e){return new Promise((t=>n(this,void 0,void 0,(function*(){let n=window.NL_ARGS.reduce(((e,t)=>(t.includes(" ")&&(t=`"${t}"`),e+" "+t)),"");(null==e?void 0:e.args)&&(n+=" "+e.args),yield v(n,{background:!0}),_(),t()}))))},writeProcessError:function(e){return p("app.writeProcessError",{data:e})},writeProcessOutput:function(e){return p("app.writeProcessOutput",{data:e})}});const E=new WeakMap;function N(e,t){return p("window.move",{x:e,y:t})}function b(){return p("window.getSize")}var P=Object.freeze({__proto__:null,center:function(){return p("window.center")},create:function(e,t){return new Promise(((n,o)=>{function r(e){return"string"!=typeof e||(e=e.trim()).includes(" ")&&(e=`"${e}"`),e}t=Object.assign(Object.assign({},t),{useSavedState:!1});let i=window.NL_ARGS.reduce(((e,t,n)=>((t.includes("--path=")||t.includes("--debug-mode")||t.includes("--load-dir-res")||0==n)&&(e+=" "+r(t)),e)),"");i+=" --url="+r(e);for(let e in t)"processArgs"!=e&&(i+=` --window${"-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}=${r(t[e])}`);t&&t.processArgs&&(i+=" "+t.processArgs),v(i,{background:!0}).then((e=>{n(e)})).catch((e=>{o(e)}))}))},exitFullScreen:function(){return p("window.exitFullScreen")},focus:function(){return p("window.focus")},getPosition:function(){return p("window.getPosition")},getSize:b,getTitle:function(){return p("window.getTitle")},hide:function(){return p("window.hide")},isFullScreen:function(){return p("window.isFullScreen")},isMaximized:function(){return p("window.isMaximized")},isVisible:function(){return p("window.isVisible")},maximize:function(){return p("window.maximize")},minimize:function(){return p("window.minimize")},move:N,setAlwaysOnTop:function(e){return p("window.setAlwaysOnTop",{onTop:e})},setDraggableRegion:function(e){return new Promise(((t,o)=>{const r=e instanceof Element?e:document.getElementById(e);let i=0,s=0,a=0,c=!1,u=performance.now();if(!r)return o({code:"NE_WD_DOMNOTF",message:"Unable to find DOM element"});if(E.has(r))return o({code:"NE_WD_ALRDREL",message:"This DOM element is already an active draggable region"});function d(e){return n(this,void 0,void 0,(function*(){if(c){const t=performance.now(),n=t-u;if(n<5)return;return u=t-(n-5),void(yield N(e.screenX-i,e.screenY-s))}a=Math.sqrt(e.movementX*e.movementX+e.movementY*e.movementY),a>=10&&(c=!0,r.setPointerCapture(e.pointerId))}))}function l(e){0===e.button&&(i=e.clientX,s=e.clientY,r.addEventListener("pointermove",d))}function f(e){r.removeEventListener("pointermove",d),r.releasePointerCapture(e.pointerId)}r.addEventListener("pointerdown",l),r.addEventListener("pointerup",f),E.set(r,{pointerdown:l,pointerup:f}),t({success:!0,message:"Draggable region was activated"})}))},setFullScreen:function(){return p("window.setFullScreen")},setIcon:function(e){return p("window.setIcon",{icon:e})},setSize:function(e){return new Promise(((t,o)=>n(this,void 0,void 0,(function*(){let n=yield b();p("window.setSize",e=Object.assign(Object.assign({},n),e)).then((e=>{t(e)})).catch((e=>{o(e)}))}))))},setTitle:function(e){return p("window.setTitle",{title:e})},show:function(){return p("window.show")},unmaximize:function(){return p("window.unmaximize")},unsetDraggableRegion:function(e){return new Promise(((t,n)=>{const o=e instanceof Element?e:document.getElementById(e);if(!o)return n({code:"NE_WD_DOMNOTF",message:"Unable to find DOM element"});if(!E.has(o))return n({code:"NE_WD_NOTDRRE",message:"DOM element is not an active draggable region"});const{pointerdown:r,pointerup:i}=E.get(o);o.removeEventListener("pointerdown",r),o.removeEventListener("pointerup",i),E.delete(o),t({success:!0,message:"Draggable region was deactivated"})}))}}),T=Object.freeze({__proto__:null,broadcast:function(e,t){return p("events.broadcast",{event:e,data:t})},dispatch:i,off:function(e,t){return window.removeEventListener(e,t),Promise.resolve({success:!0,message:"Event listener removed"})},on:r});let x=null;Object.freeze({__proto__:null,checkForUpdates:function(e){return new Promise(((t,o)=>n(this,void 0,void 0,(function*(){if(!e)return o({code:"NE_RT_NATRTER",message:"Missing require parameter: url"});try{const n=yield fetch(e);x=JSON.parse(yield n.text()),function(e){return!!(e.applicationId&&e.applicationId==window.NL_APPID&&e.version&&e.resourcesURL)}(x)?t(x):o({code:"NE_UP_CUPDMER",message:"Invalid update manifest or mismatching applicationId"})}catch(e){o({code:"NE_UP_CUPDERR",message:"Unable to fetch update manifest"})}}))))},install:function(){return new Promise(((e,t)=>n(this,void 0,void 0,(function*(){if(!x)return t({code:"NE_UP_UPDNOUF",message:"No update manifest loaded"});try{const t=yield fetch(x.resourcesURL),n=yield t.arrayBuffer();yield m(window.NL_PATH+"/resources.neu",n),e({success:!0,message:"Update installed. Restart the process to see updates"})}catch(e){t({code:"NE_UP_UPDINER",message:"Update installation error"})}}))))}}),Object.freeze({__proto__:null,clear:function(){return p("clipboard.clear")},getFormat:function(){return p("clipboard.getFormat")},readImage:function(){return new Promise(((e,t)=>{p("clipboard.readImage").then((t=>{t&&(t.data=s(t.data)),e(t)})).catch((e=>{t(e)}))}))},readText:function(){return p("clipboard.readText")},writeImage:function(e){const t=Object.assign({},e);return(null==e?void 0:e.data)&&(t.data=a(e.data)),p("clipboard.writeImage",t)},writeText:function(e){return p("clipboard.writeText",{data:e})}}),Object.freeze({__proto__:null,getMethods:function(){return p("custom.getMethods")}});let S=!1;t.yA=O,t.AZ=T,t.Ts=function(e={}){if(e=Object.assign({exportCustomMethods:!0},e),!S){if(f(),window.NL_ARGS.find((e=>"--neu-dev-auto-reload"==e))&&r("neuDev_reloadApp",(()=>n(this,void 0,void 0,(function*(){yield y("Reloading the application..."),location.reload()})))),e.exportCustomMethods&&window.NL_CMETHODS&&window.NL_CMETHODS.length>0)for(const e of window.NL_CMETHODS)Neutralino.custom[e]=(...t)=>{let n={};for(const[e,o]of t.entries())n="object"!=typeof o||Array.isArray(o)||null==o?Object.assign(Object.assign({},n),{["arg"+e]:o}):Object.assign(Object.assign({},n),o);return p("custom."+e,n)};window.NL_CVERSION="5.2.0",window.NL_CCOMMIT="425c526c318342e0e5d0f17caceef2a53049eda4",S=!0}},t.os=h,t.x=P}},t={},n=function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}(306);try{(0,n.Ts)();const e=document.getElementById("quit");e.addEventListener("click",(async function(){window.Neu&&await window.Neu.app.exit()})),e.style.removeProperty("display"),window.Neu={window:n.x,app:n.yA,events:n.AZ,os:n.os},console.log("Running in desktop")}catch(e){console.log("Running in browser")}})();